{"version":3,"sources":["webpack:///./src/views/board/skins/basic/Form.vue?6d53","webpack:///src/views/board/skins/basic/Form.vue","webpack:///./src/views/board/skins/basic/Form.vue?01d6","webpack:///./src/views/board/skins/basic/Form.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","_v","_s","config","bo_subject","attrs","loading","on","save","ref","model","value","callback","$$v","valid","expression","bo_category","rules","require","label","form","$set","_e","member","wr_id","name","email","password","matchValue","wr_password","confirmPw","uploadImage","tags","_l","item","i","key","title","required","staticClass","fileTitle","uploadFiles","staticRenderFns","components","InputPassword","pageTitle","props","access","id","data","upImages","isWrite","computed","mapState","table","bo_table","mounted","init","destroyed","length","$axios","put","methods","initForm","wr_reply","wr_parent","mb_id","wr_email","wr_name","wr_category","wr_title","wr_content","wrTags","file","formData","console","keys","Object","cnt","insert","update","component"],"mappings":"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","file":"js/chunk-2d0bab18.a0f25b76.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',[_c('v-toolbar',[_c('v-toolbar-title',[_vm._v(_vm._s(_vm.config.bo_subject)+\" 게시판\")]),_c('v-spacer'),_c('v-btn',{attrs:{\"color\":\"primary\",\"loading\":_vm.loading},on:{\"click\":_vm.save}},[_c('v-icon',{attrs:{\"left\":\"\"}},[_vm._v(\"mdi-pencil\")]),_vm._v(\" 저장 \")],1)],1),(_vm.form)?_c('v-form',{ref:\"form\",attrs:{\"lazy-validation\":\"\"},model:{value:(_vm.valid),callback:function ($$v) {_vm.valid=$$v},expression:\"valid\"}},[(_vm.config.bo_use_category)?_c('v-select',{attrs:{\"label\":\"카테고리\",\"items\":_vm.config.bo_category,\"rules\":[_vm.rules.require({ label: '카테고리' })]},model:{value:(_vm.form.wr_category),callback:function ($$v) {_vm.$set(_vm.form, \"wr_category\", $$v)},expression:\"form.wr_category\"}}):_vm._e(),(!_vm.member)?[_c('v-text-field',{attrs:{\"label\":\"이름\",\"readonly\":!!_vm.form.wr_id,\"rules\":_vm.rules.name()},model:{value:(_vm.form.wr_name),callback:function ($$v) {_vm.$set(_vm.form, \"wr_name\", $$v)},expression:\"form.wr_name\"}}),_c('v-text-field',{attrs:{\"label\":\"이메일\",\"rules\":_vm.rules.email()},model:{value:(_vm.form.wr_email),callback:function ($$v) {_vm.$set(_vm.form, \"wr_email\", $$v)},expression:\"form.wr_email\"}}),_c('input-password',{attrs:{\"label\":\"비밀번호\",\"rules\":_vm.rules.password()},model:{value:(_vm.form.wr_password),callback:function ($$v) {_vm.$set(_vm.form, \"wr_password\", $$v)},expression:\"form.wr_password\"}}),_c('input-password',{attrs:{\"label\":\"비밀번호 확인\",\"rules\":[_vm.rules.matchValue(_vm.form.wr_password)]},model:{value:(_vm.confirmPw),callback:function ($$v) {_vm.confirmPw=$$v},expression:\"confirmPw\"}})]:_vm._e(),_c('v-text-field',{attrs:{\"label\":\"제목\",\"counter\":\"120\",\"rules\":[_vm.rules.require({ label: '제목' })]},model:{value:(_vm.form.wr_title),callback:function ($$v) {_vm.$set(_vm.form, \"wr_title\", $$v)},expression:\"form.wr_title\"}}),_c('ez-tiptap',{attrs:{\"editable\":true},on:{\"uploadImage\":_vm.uploadImage},model:{value:(_vm.form.wr_content),callback:function ($$v) {_vm.$set(_vm.form, \"wr_content\", $$v)},expression:\"form.wr_content\"}}),_c('v-combobox',{attrs:{\"label\":\"검색태크\",\"items\":_vm.tags,\"multiple\":\"\",\"chips\":\"\",\"deletable-chips\":\"\",\"hide-selected\":\"\"},model:{value:(_vm.form.wrTags),callback:function ($$v) {_vm.$set(_vm.form, \"wrTags\", $$v)},expression:\"form.wrTags\"}}),_vm._l((_vm.config.wr_fields),function(item,i){return _c('div',{key:i},[(item.title)?_c('v-text-field',{attrs:{\"label\":item.title,\"rules\":item.required ? [_vm.rules.require({ label: item.title })] : []},model:{value:(_vm.form[(\"wr_\" + (i + 1))]),callback:function ($$v) {_vm.$set(_vm.form, (\"wr_\" + (i + 1)), $$v)},expression:\"form[`wr_${i + 1}`]\"}}):_vm._e()],1)}),_vm._l((_vm.config.bo_upload_cnt),function(i){return _c('div',{staticClass:\"d-flex\"},[_c('v-file-input',{attrs:{\"label\":_vm.fileTitle(i),\"show-size\":\"\"},model:{value:(_vm.uploadFiles[i - 1]),callback:function ($$v) {_vm.$set(_vm.uploadFiles, i - 1, $$v)},expression:\"uploadFiles[i - 1]\"}})],1)})],2):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <v-container>\r\n    <v-toolbar>\r\n      <v-toolbar-title>{{ config.bo_subject }} 게시판</v-toolbar-title>\r\n      <v-spacer />\r\n      <v-btn @click=\"save\" color=\"primary\" :loading=\"loading\">\r\n        <v-icon left>mdi-pencil</v-icon>\r\n        저장\r\n      </v-btn>\r\n    </v-toolbar>\r\n\r\n    <v-form v-if=\"form\" ref=\"form\" v-model=\"valid\" lazy-validation>\r\n      <v-select\r\n        v-if=\"config.bo_use_category\"\r\n        label=\"카테고리\"\r\n        v-model=\"form.wr_category\"\r\n        :items=\"config.bo_category\"\r\n        :rules=\"[rules.require({ label: '카테고리' })]\"\r\n      ></v-select>\r\n      <template v-if=\"!member\">\r\n        <v-text-field\r\n          label=\"이름\"\r\n          v-model=\"form.wr_name\"\r\n          :readonly=\"!!form.wr_id\"\r\n          :rules=\"rules.name()\"\r\n        />\r\n        <v-text-field\r\n          label=\"이메일\"\r\n          v-model=\"form.wr_email\"\r\n          :rules=\"rules.email()\"\r\n        />\r\n        <input-password\r\n          label=\"비밀번호\"\r\n          v-model=\"form.wr_password\"\r\n          :rules=\"rules.password()\"\r\n        />\r\n\r\n        <input-password\r\n          label=\"비밀번호 확인\"\r\n          v-model=\"confirmPw\"\r\n          :rules=\"[rules.matchValue(form.wr_password)]\"\r\n        />\r\n      </template>\r\n      <v-text-field\r\n        label=\"제목\"\r\n        v-model=\"form.wr_title\"\r\n        counter=\"120\"\r\n        :rules=\"[rules.require({ label: '제목' })]\"\r\n      />\r\n\r\n      <ez-tiptap\r\n        :editable=\"true\"\r\n        v-model=\"form.wr_content\"\r\n        @uploadImage=\"uploadImage\"\r\n      />\r\n\r\n      <v-combobox\r\n        label=\"검색태크\"\r\n        v-model=\"form.wrTags\"\r\n        :items=\"tags\"\r\n        multiple\r\n        chips\r\n        deletable-chips\r\n        hide-selected\r\n      />\r\n\r\n      <div v-for=\"(item, i) in config.wr_fields\" :key=\"i\">\r\n        <v-text-field\r\n          v-if=\"item.title\"\r\n          :label=\"item.title\"\r\n          v-model=\"form[`wr_${i + 1}`]\"\r\n          :rules=\"item.required ? [rules.require({ label: item.title })] : []\"\r\n        />\r\n      </div>\r\n\r\n      <div v-for=\"i in config.bo_upload_cnt\" class=\"d-flex\">\r\n        <v-file-input\r\n          :label=\"fileTitle(i)\"\r\n          v-model=\"uploadFiles[i - 1]\"\r\n          show-size\r\n        />\r\n      </div>\r\n    </v-form>\r\n  </v-container>\r\n</template>\r\n\r\n<script>\r\nimport { mapState } from \"vuex\";\r\nimport InputPassword from \"../../../../components/InputForms/InputPassword.vue\";\r\nimport validateRules from \"../../../../../util/validateRules\";\r\nexport default {\r\n  components: { InputPassword },\r\n  name: \"BasicForm\",\r\n  title() {\r\n    return this.pageTitle;\r\n  },\r\n  props: {\r\n    config: Object,\r\n    access: Object,\r\n    id: [String, Number],\r\n  },\r\n  data() {\r\n    return {\r\n      form: null,\r\n      valid: true,\r\n      confirmPw: \"\",\r\n      uploadFiles: Array(this.config.bo_upload_cnt).fill(null),\r\n      tags: [\"APPLE\", \"BANANA\"], // TODO : 서버에서 태그 목록을 가져온다.\r\n      loading: false,\r\n      upImages: [],\r\n      isWrite: false, // 작성완료여부\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapState({\r\n      member: (state) => state.user.member,\r\n    }),\r\n    table() {\r\n      return this.config.bo_table;\r\n    },\r\n    pageTitle() {\r\n      return (\r\n        this.config.bo_subject + (this.id ? \" 게시물 수정\" : \" 게시물 작성\")\r\n      );\r\n    },\r\n    rules: () => validateRules,\r\n  },\r\n  mounted() {\r\n    this.init();\r\n  },\r\n  destroyed() {\r\n    // 작성을 완료하지 않고 에디터에서 업로드한 이미지가 있으면 삭제를 요청\r\n    if (!this.isWrite && this.upImages.length) {\r\n      this.$axios.put(`/api/board/imageCancle/${this.table}`, this.upImages);\r\n    }\r\n  },\r\n  methods: {\r\n    async init() {\r\n      if (this.id) {\r\n      } else {\r\n        this.initForm();\r\n      }\r\n    },\r\n    initForm() {\r\n      const form = {\r\n        wr_reply: 0,\r\n        wr_parent: 0, // TODO : 추후 답근 작성시 부모글 ID를 넣음\r\n        mb_id: this.member ? this.member.mb_id : 0, // 0이면 비회원 글 작성\r\n        wr_email: this.member ? this.member.mb_email : \"\",\r\n        wr_name: this.member ? this.member.mb_name : \"\",\r\n        wr_password: \"\",\r\n        wr_category: this.$route.query.ca || this.config.bo_category[0], // TODO : 추후 링크 참조시 카테고리 정보를 넘김\r\n        wr_title: \"\",\r\n        wr_content: \"\",\r\n        wrTags: [],\r\n      };\r\n      for (let i = 1; i <= 10; i++) {\r\n        form[`wr_${i}`] = \"\";\r\n      }\r\n      this.form = form;\r\n    },\r\n    fileTitle(i) {\r\n      // TODO : 수정 할때 기존 업로드 된 파일을 이곳에서 재활용\r\n      return `첨부파일 ${i}`;\r\n    },\r\n    async uploadImage({ file, desc, callback }) {\r\n      const formData = new FormData();\r\n      formData.append(\"upFile\", file);\r\n      formData.append(\"bf_desc\", desc);\r\n      const data = await this.$axios.post(\r\n        `/api/board/imageUpload/${this.table}`,\r\n        formData\r\n      );\r\n      console.log(\"uploadImage Data : \", data);\r\n      this.upImages.push(data);\r\n      callback(`/upload/${this.table}/${data.bf_src}`);\r\n    },\r\n\r\n    async save() {\r\n      this.$refs.form.validate();\r\n      await this.$nextTick();\r\n      if (!this.valid) return;\r\n      this.loading = true;\r\n      const formData = new FormData();\r\n      const keys = Object.keys(this.form);\r\n\r\n      for (const key of keys) {\r\n        if (typeof this.form[key] == \"object\") {\r\n          formData.append(key, JSON.stringify(this.form[key]));\r\n        } else {\r\n          formData.append(key, this.form[key]);\r\n        }\r\n      }\r\n\r\n      let cnt = 0;\r\n      for (let i = 0; i < this.config.bo_upload_cnt; i++) {\r\n        if (this.uploadFiles[i] != null) {\r\n          formData.append(`upFiles[${cnt}]`, this.uploadFiles[i]);\r\n          cnt++;\r\n        }\r\n      }\r\n\r\n      let wr_id;\r\n      if (this.id) {\r\n        // TODO : DB 수정\r\n        wr_id = await this.update(formData);\r\n      } else {\r\n        // TODO : DB 입력\r\n        wr_id = await this.insert(formData);\r\n      }\r\n\r\n      //글 작성이 정상적으로 완료 되었다면..\r\n      if (wr_id) {\r\n        this.isWrite = true;\r\n      }\r\n\r\n      this.loading = false;\r\n    },\r\n\r\n    async insert(formData) {},\r\n    async update(formData) {},\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Form.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Form.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Form.vue?vue&type=template&id=1f6cdf41&\"\nimport script from \"./Form.vue?vue&type=script&lang=js&\"\nexport * from \"./Form.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}
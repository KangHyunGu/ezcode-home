(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0cba44"],{"4b11":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{attrs:{fluid:""}},[r("v-toolbar",[r("v-toolbar-title",[e._v(e._s(e.pageTitle))]),r("v-spacer"),r("v-btn",{attrs:{color:"primary",loading:e.loading},on:{click:e.save}},[r("v-icon",{attrs:{left:""}},[e._v("mdi-pencil")]),e._v(" 저장 ")],1)],1),e.form?r("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[r("v-text-field",{attrs:{label:"팝업 제목",counter:"120",rules:[e.rules.require({label:"제목"})]},model:{value:e.form.wr_title,callback:function(t){e.$set(e.form,"wr_title",t)},expression:"form.wr_title"}}),r("div",{staticClass:"d-flex align-center"},[r("div",[e._v("선택시 몇일동안 팝업을 보여주지 않음")]),r("v-radio-group",{staticClass:"ml-4",attrs:{row:""},model:{value:e.form.wr_1,callback:function(t){e.$set(e.form,"wr_1",t)},expression:"form.wr_1"}},[r("v-radio",{attrs:{label:"1일",value:"1"}}),r("v-radio",{attrs:{label:"3일",value:"3"}}),r("v-radio",{attrs:{label:"7일",value:"7"}})],1),r("v-spacer"),r("v-checkbox",{attrs:{label:"사용유무"},model:{value:e.form.wr_9,callback:function(t){e.$set(e.form,"wr_9",t)},expression:"form.wr_9"}})],1),r("date-time-picker",{attrs:{label:"시작 일시"},model:{value:e.form.wr_2,callback:function(t){e.$set(e.form,"wr_2",t)},expression:"form.wr_2"}}),r("date-time-picker",{attrs:{label:"종료 일시"},model:{value:e.form.wr_3,callback:function(t){e.$set(e.form,"wr_3",t)},expression:"form.wr_3"}}),r("div",{staticClass:"d-flex"},[r("v-text-field",{staticClass:"ml-4",attrs:{label:"top",suffix:"px",rules:[e.rules.require({label:"top"})]},model:{value:e.form.wr_5,callback:function(t){e.$set(e.form,"wr_5",t)},expression:"form.wr_5"}}),r("v-text-field",{staticClass:"ml-4",attrs:{label:"left",suffix:"px",rules:[e.rules.require({label:"left"})]},model:{value:e.form.wr_6,callback:function(t){e.$set(e.form,"wr_6",t)},expression:"form.wr_6"}}),r("v-text-field",{staticClass:"ml-4",attrs:{label:"width",suffix:"px",rules:[e.rules.require({label:"width"})]},model:{value:e.form.wr_7,callback:function(t){e.$set(e.form,"wr_7",t)},expression:"form.wr_7"}}),r("v-text-field",{staticClass:"ml-4",attrs:{label:"height",suffix:"px",rules:[e.rules.require({label:"height"})]},model:{value:e.form.wr_8,callback:function(t){e.$set(e.form,"wr_8",t)},expression:"form.wr_8"}})],1),r("v-text-field",{attrs:{label:"링크"},model:{value:e.form.wr_4,callback:function(t){e.$set(e.form,"wr_4",t)},expression:"form.wr_4"}}),r("ez-tiptap",{attrs:{editable:!0},on:{uploadImage:e.uploadImage},model:{value:e.form.wr_content,callback:function(t){e.$set(e.form,"wr_content",t)},expression:"form.wr_content"}}),r("v-combobox",{attrs:{label:"검색태그",items:e.tags,multiple:"",chips:"","deletable-chips":"","hide-selected":""},model:{value:e.form.wrTags,callback:function(t){e.$set(e.form,"wrTags",t)},expression:"form.wrTags"}}),e._l(e.config.wr_fields,(function(t,a){return r("div",{key:a},[t.title?r("v-text-field",{attrs:{label:t.title,rules:t.required?[e.rules.require({label:t.title})]:[]},model:{value:e.form["wr_"+(a+1)],callback:function(t){e.$set(e.form,"wr_"+(a+1),t)},expression:"form[`wr_${i + 1}`]"}}):e._e()],1)})),e._l(e.config.bo_upload_cnt,(function(t){return r("div",{staticClass:"d-flex"},[r("v-file-input",{attrs:{label:e.fileTitle(t),"show-size":"",disabled:!(!e.form.wrFiles||!e.form.wrFiles[t-1])&&!e.form.wrFiles[t-1].remove},model:{value:e.uploadFiles[t-1],callback:function(r){e.$set(e.uploadFiles,t-1,r)},expression:"uploadFiles[i - 1]"}}),e.form.wrFiles&&e.form.wrFiles[t-1]?r("div",[r("v-checkbox",{attrs:{label:"삭제"},on:{change:function(r){e.uploadFiles[t-1]=null}},model:{value:e.form.wrFiles[t-1].remove,callback:function(r){e.$set(e.form.wrFiles[t-1],"remove",r)},expression:"form.wrFiles[i - 1].remove"}})],1):e._e()],1)}))],2):e._e()],1)},i=[],n=r("53ca"),o=r("c7eb"),s=r("1da1"),l=r("5530"),c=(r("a9e3"),r("cb29"),r("99af"),r("b64b"),r("e9c4"),r("2f62")),u=r("248f"),m=r.n(u),f=r("445e"),d=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"d-flex"},[r("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,i=t.attrs;return[r("v-text-field",e._g(e._b({attrs:{label:e.label,"prepend-icon":"mdi-calendar",readonly:""},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}},"v-text-field",i,!1),a))]}}]),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[r("v-date-picker",{on:{input:function(t){e.menu=!1}},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1),r("v-select",{staticClass:"ml-4",staticStyle:{"max-width":"80px"},attrs:{items:e.hourItems,suffix:"시"},model:{value:e.hour,callback:function(t){e.hour=t},expression:"hour"}}),r("v-select",{staticClass:"ml-4",staticStyle:{"max-width":"80px"},attrs:{items:e.minItems,suffix:"분"},model:{value:e.min,callback:function(t){e.min=t},expression:"min"}}),r("v-spacer")],1)},p=[],b={name:"DateTimePicker",model:{value:"value",event:"input"},props:{value:{type:String,required:!0},label:{type:String,required:!0}},data:function(){return{menu:!1,date:"",hour:0,min:0}},computed:{hourItems:function(){for(var e=[],t=0;t<24;t++)e.push(t);return e},minItems:function(){return[0,15,30,45]}},created:function(){var e=this.value?this.$moment(this.value):this.$moment();this.date=e.format("L"),this.hour=parseInt(e.format("H")),this.min=this.value?parseInt(e.format("m")):0},watch:{date:function(){this.emitValue()},hour:function(){this.emitValue()},min:function(){this.emitValue()}},methods:{emitValue:function(){if(this.date){var e=this.$moment(this.date);e.set("hour",this.hour),e.set("minute",this.min),this.$emit("input",e.format("LT"))}}}},v=b,w=r("2877"),h=Object(w["a"])(v,d,p,!1,null,null,null),_=h.exports,x={components:{InputPassword:f["a"],DateTimePicker:_},name:"BasicForm",title:function(){return this.pageTitle},props:{config:Object,access:Object,id:[String,Number]},data:function(){return{form:null,valid:!0,confimPw:"",uploadFiles:Array(this.config.bo_upload_cnt).fill(null),tags:[],loading:!1,upImages:[],isWrite:!1,parentItem:null}},computed:Object(l["a"])(Object(l["a"])({},Object(c["e"])({member:function(e){return e.user.member}})),{},{table:function(){return this.config.bo_table},pid:function(){return"reply"==this.$route.query.act?this.id:0},pageTitle:function(){return this.config.bo_subject+(this.id?" 게시물 수정":" 게시물 작성")},rules:function(){return m.a}}),mounted:function(){this.init()},destroyed:function(){!this.isWrite&&this.upImages.length&&this.$axios.put("/api/board/imgCancle/".concat(this.table),this.upImages)},methods:{init:function(){var e=this;return Object(s["a"])(Object(o["a"])().mark((function t(){var r;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.id){t.next=8;break}return t.next=3,e.$axios.get("/api/board/read/".concat(e.table,"/").concat(e.id));case 3:r=t.sent,e.pid?(e.initForm(),e.form.wr_category=r.wr_category,e.parentItem=r):e.form=r,e.form.wr_password="",t.next=9;break;case 8:e.initForm();case 9:case"end":return t.stop()}}),t)})))()},initForm:function(){for(var e={wr_reply:0,wr_parent:this.pid,mb_id:this.member?this.member.mb_id:0,wr_email:this.member?this.member.mb_email:"",wr_name:this.member?this.member.mb_name:"",wr_password:"",wr_category:this.$route.query.ca||this.config.bo_category[0]||"",wr_title:"",wr_content:"",wrTags:[]},t=1;t<=10;t++)e["wr_".concat(t)]="";e.wr_1="1",e.wr_9="1",this.form=e},fileTitle:function(e){if(this.form.wrFiles){var t=this.form.wrFiles[e-1];return t&&!t.remove?t.bf_name:"첨부파일 ".concat(e)}return"첨부파일 ".concat(e)},uploadImage:function(e){var t=this;return Object(s["a"])(Object(o["a"])().mark((function r(){var a,i,n,s,l;return Object(o["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=e.file,i=e.desc,n=e.callback,s=new FormData,s.append("upFile",a),s.append("bf_desc",i),r.next=6,t.$axios.post("/api/board/imageUpload/".concat(t.table),s);case 6:l=r.sent,t.upImages.push(l),n("/upload/".concat(t.table,"/").concat(l.bf_src));case 9:case"end":return r.stop()}}),r)})))()},save:function(){var e=this;return Object(s["a"])(Object(o["a"])().mark((function t(){var r,a,i,s,l,c,u,m;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$refs.form.validate(),t.next=3,e.$nextTick();case 3:if(e.valid){t.next=5;break}return t.abrupt("return");case 5:for(e.loading=!0,r=new FormData,a=Object.keys(e.form),i=0,s=a;i<s.length;i++)l=s[i],"object"==Object(n["a"])(e.form[l])?r.append(l,JSON.stringify(e.form[l])):r.append(l,e.form[l]);for(e.$route.query.token&&r.append("token",e.$route.query.token),c=0,u=0;u<e.config.bo_upload_cnt;u++)null!=e.uploadFiles[u]&&(r.append("upFiles[".concat(c,"]"),e.uploadFiles[u]),c++);if(r.append("upImages",JSON.stringify(e.upImages)),!e.id||e.pid){t.next=19;break}return t.next=16,e.update(r);case 16:m=t.sent,t.next=22;break;case 19:return t.next=21,e.insert(r);case 21:m=t.sent;case 22:m&&(e.isWrite=!0,e.$router.push("/board/".concat(e.table))),e.loading=!1;case 24:case"end":return t.stop()}}),t)})))()},insert:function(e){var t=this;return Object(s["a"])(Object(o["a"])().mark((function r(){var a;return Object(o["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$axios.post("/api/board/write/".concat(t.table),e);case 2:return a=r.sent,r.abrupt("return",a.wr_id);case 4:case"end":return r.stop()}}),r)})))()},update:function(e){var t=this;return Object(s["a"])(Object(o["a"])().mark((function r(){var a;return Object(o["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$axios.put("/api/board/write/".concat(t.table,"/").concat(t.id),e);case 2:return a=r.sent,r.abrupt("return",a.wr_id);case 4:case"end":return r.stop()}}),r)})))()}}},g=x,k=Object(w["a"])(g,a,i,!1,null,null,null);t["default"]=k.exports}}]);
//# sourceMappingURL=chunk-2d0cba44.0afcb827.js.map
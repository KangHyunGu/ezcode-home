(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bf58e742"],{7714:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.isClient?a("div",[t._t("default")],2):a("div",{staticClass:"d-none"},[t._t("server")],2)},r=[],i={name:"SsrRenderer",data:function(){return{isClient:!1}},mounted:function(){this.isClient=!0}},o=i,s=a("2877"),l=Object(s["a"])(o,n,r,!1,null,null,null);e["a"]=l.exports},"9d01":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{fluid:""}},[t.item?a("v-card",{attrs:{flat:""}},[a("v-card-title",[a("v-toolbar",{attrs:{flat:""}},[a("v-toolbar-title",[t._v(t._s(t.item.wr_title))]),a("v-spacer"),a("v-subheader",{staticClass:"text-no-wrap"},[a("v-icon",{staticClass:"mx-2",attrs:{small:""}},[t._v("mdi-account")]),t._v(" "+t._s(t.item.wr_name)+" "),a("v-icon",{staticClass:"mx-2",attrs:{small:""}},[t._v("mdi-clock-outline")]),a("i",[a("display-time",{attrs:{time:t.item.wr_createat}})],1),a("v-icon",{staticClass:"mx-2",attrs:{small:""}},[t._v("mdi-eye")]),t._v(" "+t._s(t.item.wr_view)+" ")],1)],1)],1),a("v-card-text",[a("ssr-renderer",{scopedSlots:t._u([{key:"server",fn:function(){return[a("div",{domProps:{innerHTML:t._s(t.item.wr_content)}})]},proxy:!0}],null,!1,3945286292)},[[a("ez-tiptap",{attrs:{editable:!1},model:{value:t.item.wr_content,callback:function(e){t.$set(t.item,"wr_content",e)},expression:"item.wr_content"}})]],2)],1),a("v-card-text",[a("tag-view",{attrs:{tags:t.item.wrTags}})],1),a("v-card-text",[a("display-good",{staticClass:"d-flex justify-center",attrs:{table:t.table,item:t.item,btnProps:{tile:!0,small:!0},icon:{good:"mdi-thumb-up",bad:"mdi-thumb-down"}}})],1),a("v-card-text",[a("file-download",{attrs:{table:t.table,item:t.item,access:t.access}})],1),a("v-card-actions",[a("v-col",{staticClass:"text-no-wrap",attrs:{cols:"4"}},["MODIFY"==t.isModify?a("board-button",{attrs:{color:"info",to:"/board/"+t.table+"/"+t.item.wr_id+"?act=write",label:"수정",icon:"mdi-pencil"}}):t._e(),"NO_MEMBER"==t.isModify?a("modify-button",{attrs:{color:"info",table:t.table,wr_id:t.item.wr_id,label:"수정"},on:{onValid:t.modifyItem}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-pencil")]),t._v(" 수정 ")],1):t._e(),"MODIFY"==t.isModify?a("board-button",{staticClass:"ml-2",attrs:{color:"error",label:"삭제",icon:"mdi-delete",loading:t.delelteLoading},on:{click:t.deleteItem}}):t._e(),"NO_MEMBER"==t.isModify?a("modify-button",{staticClass:"ml-2",attrs:{color:"error",table:t.table,wr_id:t.item.wr_id,label:"삭제"},on:{onValid:t.deleteItem}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-delete")]),t._v(" 삭제 ")],1):t._e()],1),a("v-col",{staticClass:"text-center text-no-wrap",attrs:{cols:"4"}},[a("board-button",{attrs:{to:"/board/"+t.table,color:"accent",label:"목록",icon:"mdi-menu"}})],1),a("v-col",{staticClass:"text-right text-no-wrap",attrs:{cols:"4"}},[t.access.reply?a("board-button",{attrs:{color:"secondary",to:"/board/"+t.table+"/"+t.item.wr_id+"?act=reply",label:"답글쓰기",icon:"mdi-subdirectory-arrow-right"}}):t._e(),t.access.write?a("board-button",{staticClass:"ml-2",attrs:{color:"primary",to:"/board/"+t.table+"?act=write",label:"글쓰기",icon:"mdi-pencil"}}):t._e()],1)],1),a("comment-list",{attrs:{id:t.item.wr_id,table:t.table,access:t.access}})],1):t._e()],1)},r=[],i=a("c7eb"),o=a("1da1"),s=a("5530"),l=(a("a9e3"),a("b64b"),a("99af"),a("e9c4"),a("2f62")),c=a("bb5e"),d=a("7714"),u=a("063f"),b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-chip-group",t._l(t.tags,(function(e){return a("v-chip",{key:e,attrs:{label:""}},[t._v(" "+t._s(e)+" ")])})),1)},m=[],f={name:"TagView",props:{tags:{type:Array,default:[]}}},p=f,v=a("2877"),_=Object(v["a"])(p,b,m,!1,null,null,null),w=_.exports,h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",t._l(t.wrFiles,(function(e){return a("v-btn",{key:e.bf_id,staticClass:"mt-1 text-none",attrs:{block:"",disabled:!t.access.download,href:"/api/board/download/"+t.table+"/"+e.bf_name+"?src="+e.bf_src,target:"_blank"}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-download")]),t._v(" "+t._s(e.bf_name)+" "),a("v-spacer"),t._v(" "+t._s(t.filesize(e.bf_size))+" ")],1)})),1)},g=[],x=a("64f2"),y={name:"FileDownload",props:["table","item","access"],computed:{wrFiles:function(){return this.item.wrFiles||[]},filesize:function(){return x["filesize"]}}},O=y,k=Object(v["a"])(O,h,g,!1,null,null,null),j=k.exports,$=a("0359"),C=a("f6c9"),E=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[a("v-btn",t._b({attrs:{loading:t.loading},on:{click:t.openDialog}},"v-btn",t.$attrs,!1),[t._t("default")],2),a("ez-dialog",{ref:"dialog",attrs:{label:"게시물 "+t.label,width:"300",persistent:""},on:{onClose:t.closeDialog}},[a("v-form",{ref:"form",attrs:{"lazy-validation":""},on:{submit:function(e){return e.preventDefault(),t.checkPass.apply(null,arguments)}},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("input-password",{staticClass:"mt-4",attrs:{label:"비밀번호",rules:t.rules.password(),"prepend-icon":"mdi-key"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),a("v-btn",{staticClass:"mt-2",attrs:{type:"submit",block:"",color:"primary"}},[t._v("비밀번호 확인")])],1)],1)],1)},D=[],M=a("a2e4"),S=a("445e"),I=a("248f"),R=a.n(I),T={components:{EzDialog:M["a"],InputPassword:S["a"]},name:"ModifyButton",inheritAttrs:!1,props:{table:{type:String,required:!0},wr_id:{type:Number,required:!0},label:{type:String,required:!0}},data:function(){return{loading:!1,password:"",valid:!0}},computed:{rules:function(){return R.a}},methods:{openDialog:function(){this.loading=!0,this.$refs.dialog.open()},closeDialog:function(){this.loading=!1},checkPass:function(){var t=this;return Object(o["a"])(Object(i["a"])().mark((function e(){var a;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$refs.form.validate(),e.next=3,t.$nextTick();case 3:if(t.valid){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,t.$axios.post("/api/board/check/".concat(t.table,"/").concat(t.wr_id),{password:t.password});case 7:a=e.sent,a&&(t.$emit("onValid",a.token),t.$refs.dialog.close());case 9:case"end":return e.stop()}}),e)})))()}}},z=T,B=Object(v["a"])(z,E,D,!1,null,null,null),N=B.exports,F=a("2fa1"),P={components:{SsrRenderer:d["a"],DisplayTime:u["a"],TagView:w,FileDownload:j,BoardButton:$["a"],DisplayGood:C["a"],ModifyButton:N,CommentList:F["default"]},name:"BasicRead",props:{config:Object,access:Object,id:[String,Number]},data:function(){return{delelteLoading:!1}},computed:Object(s["a"])(Object(s["a"])(Object(s["a"])({},Object(l["e"])({member:function(t){return t.user.member},item:function(t){return t.board.read}})),Object(l["c"])("user",["GRANT"])),{},{table:function(){return this.config.bo_table},isModify:function(){if(this.member){if(this.member.mb_id==this.item.mb_id||this.GRANT>=c["LV"].SUPER)return"MODIFY"}else if(0==this.item.mb_id)return"NO_MEMBER";return""}}),watch:{id:function(){this.fetchData()}},serverPrefetch:function(){return this.fetchData()},mounted:function(){this.item?this.viewUp():this.fetchData()},destroyed:function(){this.SET_READ(null)},methods:Object(s["a"])(Object(s["a"])(Object(s["a"])({},Object(l["d"])("board",["SET_READ","VIEW_UP"])),Object(l["b"])("board",["getBoardRead"])),{},{fetchData:function(){var t=this;return Object(o["a"])(Object(i["a"])().mark((function e(){var a;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("FETCH",t.id),a={},t.$ssrContext&&(a.token=t.$ssrContext.token),e.next=5,t.getBoardRead({table:t.table,id:t.id,headers:a});case 5:t.$ssrContext||t.viewUp();case 6:case"end":return e.stop()}}),e)})))()},viewUp:function(){var t=this;return Object(o["a"])(Object(i["a"])().mark((function e(){var a,n,r,o,s,l,c;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(a=t.$moment().format("L"),console.log('window.localStorage.getItem("view") : ',window.localStorage.getItem("view")),n=JSON.parse(window.localStorage.getItem("view"))||{},r=Object.keys(n),o=0,s=r;o<s.length;o++)l=s[o],l!=a&&delete n[l];if(n[a]||(n[a]={}),c="".concat(t.table,"_").concat(t.id),n[a][c]){e.next=13;break}return n[a][c]=!0,e.next=11,t.$axios.put("/api/board/view/".concat(t.table,"/").concat(t.id));case 11:t.VIEW_UP(),window.localStorage.setItem("view",JSON.stringify(n));case 13:case"end":return e.stop()}}),e)})))()},deleteItem:function(t){var e=this;return Object(o["a"])(Object(i["a"])().mark((function a(){var n,r;return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return console.log("token : ",t),e.delelteLoading=!0,a.next=4,e.$ezNotify.confirm("게시물을 삭제 하시겠습니까?","게시물 삭제",{icon:"mdi-alert"});case 4:if(n=a.sent,!n){a.next=10;break}return a.next=8,e.$axios.delete("/api/board/".concat(e.table,"/").concat(e.item.wr_id,"?token=").concat(t));case 8:r=a.sent,r&&(e.$toast.info("".concat(r,"개의 게시물을 삭제하였습니다.")),e.$router.push("/board/".concat(e.table)));case 10:e.delelteLoading=!1;case 11:case"end":return a.stop()}}),a)})))()},modifyItem:function(t){console.log("token : ",t),this.$router.push("/board/".concat(this.table,"/").concat(this.item.wr_id,"?act=write&token=").concat(t))}})},L=P,V=Object(v["a"])(L,n,r,!1,null,null,null);e["default"]=V.exports},a2e4:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",t._b({model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},"v-dialog",t.$attrs,!1),[a("v-card",[a("v-toolbar",t._b({},"v-toolbar",t.$attrs,!1),[a("v-toolbar-title",[t._v(t._s(t.label))]),a("v-spacer"),a("v-btn",{attrs:{icon:""},on:{click:t.close}},[a("v-icon",[t._v("mdi-close")])],1)],1),a("v-card-text",[t._t("default")],2)],1)],1)},r=[],i={name:"ezDialog",props:{label:{type:String,required:!0}},data:function(){return{dialog:!1}},methods:{open:function(){this.$emit("onOpen"),this.dialog=!0},close:function(){this.dialog=!1,this.$emit("onClose")}}},o=i,s=a("2877"),l=Object(s["a"])(o,n,r,!1,null,null,null);e["a"]=l.exports}}]);
//# sourceMappingURL=chunk-bf58e742.cc2def97.js.map